\chapter{Problem Analysis}\label{ch:problem}
This chapter entails an analysis of the problem which is the research question's foundation.
It is crucial, as the quality of requirements ultimately determines the quality of the overview and
subsequent analysis.
% FIXME: source for this?

Requirements for a software system that involves \ac{ML} and thus \ac{DL} differs from
the traditional approach. The data-driven software components are not entirely defined by the
programmer but are influenced by data.
The system acts with dependency on the test data~\citep{siebert_construction_2021}.
This poses a challenge in determining requirements and measuring quality of
results~\citep{nakamichi_requirements-driven_2020}.
Instead of categorizing functional and non-functional requirements, like for traditional
software projects~\citep{zowghi_requirements_2014}, qualities that a \ac{MLS} must possess
are defined.

% FIXME: end-to-end metric is important, not word spotting! (alphanumeric)

\section{Use Case}
The problem can be depicted by a use case.
This use case sets the foundation for determining requirements for an
approach because qualities derive from the intended purpose of
use~\citep{siebert_construction_2021}.
Table~\ref{tb:useCaseQualities} gives an overview over the relevant properties that can be derived
from the use case.
\begin{table}[ht]
    \centering\scriptsize
    \begin{tabular}{c l}
        \textbf{Offline Capabilities} & Perform extraction process offline \\
        \textbf{Alphanumeric recognition}    & Recognize alphanumeric strings such as serial \\
                                    & numbers \\
        \textbf{Semantics retention} & Retain semantics given implicitly be space, \\
                            & strucure and rotation of text in labels \\
    \end{tabular}
    \caption{Qualities specific to use case --- exclusion criterias\label{tb:useCaseQualities}}
\end{table}
For this thesis, the basic use case is as follows:
A technician takes a photo of a device label with his smart phone.
For this the technician is situated in locations like a cable shaft.
Due to this, there's no internet availability.
The process from taking the image to storing the extracted text safely must work offline.
The resulting image contains printed textual information which must be extraced by an application on
the smart phone.
Space and structure of this information can vary from label to label (see figure~\ref{fig:examples}).
The text, spacing and structure carries semantic information which can be important for later
processing in the scope of a business process~\citep{chen_text_2021}.
The goal is to extract the text and preserve semantics that are implicitly provided through
structure and space.
This means text and the respective coordinates, height, width and a possible rotation angle must
be output as the result~\citep{yang_learning_2021}.
Those values can then be transformed into other formats such as JSON or HTML as needed.
\begin{figure}[h]
    \centering
    \subfigure[Positive example\label{fig:good-example}]{\includegraphics[width=0.40\textwidth]
        {img/Image-Example-Positive.jpg}}
    \subfigure[Negative example\label{fig:bad-example}]{\includegraphics[width=0.40\textwidth]
        {img/Image-Example-Negative.jpg}}
    \caption{Examples for label images\label{fig:examples}}
\end{figure}
% XXX: use concept of representation for semantics retention
In addition to this, the labels can contain arbitrary alphanumeric strings such as serial numbers
(see figure~\ref{fig:examples}).
This results in the requirement that the \ac{DL} model has to be able to recognize sequences that
are not part of a predefined lexicon~\citep{ghosh_visual_2017}.
The qualities for the \ac{MLS} that can be derived directly from the use case (see
Table~\ref{tb:useCaseQualities}) can be regarded as excluding criterias, because an approach
that does not possess the qualities in question, cannot be regarded as viable for the use case.

\section{Quality Identification}
In the article~\cite{ashmore_assuring_2021} the qualities are identified and assigned to different
challenges in regards to working with \ac{MLS}: Development Challenges, Production Challenges,
Organizational Challenges.
Because the only the Model Selection substage of the lifecycle is performed, the challenges and their
qualities are not relevant for this thesis, as they concern the operational aspect of \acp{MLS}.

% FIXME: make figure for system

In~\cite{nakamichi_requirements-driven_2020,siebert_construction_2021} systematic approaches for
identification and documentation of qualities are detailed.
In \acp{MLS} various entities interact to in order to produce the desired functionality.
The paper~\cite{nakamichi_requirements-driven_2020} suggests that in order to adequately evaluate
the qualities, it is essential to not only consider the model but the entire \ac{MLS}.
These entities are data, model, environment,
system/infrastructure~\citep{nakamichi_requirements-driven_2020, siebert_construction_2021}.
The article~\cite{siebert_construction_2021} differentiates between system and infrastrucure.
The infrastrucure represents given hardware and available libraries, whereas the system depicts
the software that surrounds the model in the runtime environment.
The data view pertains to the quality of development and runtime
data~\citep{siebert_construction_2021}.
% FIXME: better definition, there are cyclic architectures
The model consists of subcomponents organized in directed acyclc graph building a
pipeline.
This directed acyclic graph depicts everything from processing the images to the extracted
information~\citep{siebert_construction_2021}.
The environment entity covers the external aspects to the \ac{MLS} which may interact with
it~\citep{siebert_construction_2021}.
In the scope of this work the environment entails mostly the conditions in which images are taken.
For this thesis the entities data and system cannot be regarded as given.
The entities environment and infrastrucure are only losely defined through the use case.
That is why the systematic approaches cannot be performed in the scope of this thesis.
For example~\cite{siebert_construction_2021} proposes to follow the systematic CRISP-DM approach of
identifying qualities.
It cannot be performed due to the lack of data and the other entities.
derived from the use case.
The Table~\ref{tb:LiteratureQualitiesModel} (p.~\pageref{tb:LiteratureQualitiesModel}) lists all
qualities that pertain to the model entity.
Different qualities are \textit{grouped together} for their similarities.
Because of their properties they can be evaluated jointly.
When it comes to documenting the identified qualities,
both~\cite{nakamichi_requirements-driven_2020} and~\cite{siebert_construction_2021} define a meta
model for qualities that combines qualities with
measurement methods and values and assignes them to an entity of the \ac{MLS}.
The implementation and testing phase are not performed in the scope of this thesis and the
difficulty in assessing the performance ahead of those phases, prevents the evaluation
of measurements.
Additionally, experimental results from literature can only be compared as long as factors such as
hardware, platform, source code, configuration and dataset are uniform~\citep{arpteg_software_2018}.
Comparing models through results of diferent papers is troublesome, because different papers
might use different evaluation and testing environments~\citep{baek_what_2019}.
This applies to studies that present an overview such as~\cite{chen_text_2021,long_scene_2021}.
These studies can only be regarded as guiding values because the performance for a specific dataset
cannot be predicted without testing on it~\cite{arpteg_software_2018}.
That's why targets for measurements are not defined, as evaluation would only deliver a false
sense of certainty.

\begin{table}[h]
    \centering\scriptsize
    \begin{tabular}{p{.4\textwidth} p{.6\textwidth}}
        \textbf{Qualitiy} & \textbf{Source(s)} \\
        \toprule
        \textit{Appropriateness} \\
        Appropriateness &~\cite{siebert_construction_2021} \\
        Suitability &~\cite{siebert_construction_2021} \\
        Model Fitness --- Quality of Output Data &~\cite{nakamichi_requirements-driven_2020} \\
        \midrule
        \textit{Performance} \\
        Performance &~\cite{ashmore_assuring_2021,vogelsang_requirements_2019} \\
        Accuracy &~\cite{nakamichi_requirements-driven_2020} \\
        Model Fitness --- Degree of Correctness &~\cite{nakamichi_requirements-driven_2020,
                                                    zhang_machine_2020} \\
        Development correctness &~\cite{siebert_construction_2021} \\
        \midrule
        \textit{Robustness} \\
        Robustness &~\cite{ashmore_assuring_2021, hu_towards_2020, siebert_construction_2021} \\
        Robustness Against Change of Input Data &~\cite{nakamichi_requirements-driven_2020} \\
        Robustness Against Noise Data &~\cite{nakamichi_requirements-driven_2020} \\
        Relevance / bias-variance tradeoff &~\cite{siebert_construction_2021, zhang_machine_2020} \\
        Trained Model Generalization Performance Appropriateness
                                                    &~\cite{nakamichi_requirements-driven_2020} \\
        \midrule
        \textit{Reusability} &~\cite{ashmore_assuring_2021} \\
        \midrule
        \textit{Interpretability} \\
        Interpretability &~\cite{ashmore_assuring_2021, siebert_construction_2021, zhang_machine_2020}\\
        Understandability &~\cite{nakamichi_requirements-driven_2020} \\
        Transparency &~\cite{arpteg_software_2018} \\
        Model Explainability &~\cite{vogelsang_requirements_2019} \\
        Comprehensibility &~\cite{ashmore_assuring_2021} \\
        Comprehensiveness &~\cite{ashmore_assuring_2021} \\
        \midrule
        \textit{Fairness}\\
        Fairness &~\cite{siebert_construction_2021, zhang_machine_2020} \\
        Freedom from Discrimination &~\cite{vogelsang_requirements_2019} \\
        \midrule
        \textit{Performance Efficiency} \\
        Resource Utilization &~\cite{siebert_construction_2021,
                                nakamichi_requirements-driven_2020} \\
        Execution efficiency &~\cite{siebert_construction_2021} \\
        Temporal Performance &~\cite{nakamichi_requirements-driven_2020} \\
        \bottomrule
    \end{tabular}
    \caption{MLS qualities identified for model entity\label{tb:LiteratureQualitiesModel}}
\end{table}
\FloatBarrier

\section{Quality Relevancy}
In addition to the qualities that arise directly from the use case, literature reveals a number of
common qualities in regards to \ac{MLS} (see Table~\ref{tb:condensedQualities}), some of which
can be regarded as relevant and other do not hold any relevance for the specific use case.
The qualities are taken from literature which covers \ac{ML} in general to literature
which covers scene text \ac{OCR}.
Only qualities that concern the model will be looked at, as the model is the focus of this thesis.
The qualities may however be influenced by other entities.

\begin{table}[h]
    \centering\scriptsize
    \begin{tabular}{l l}
        \textbf{Relevant}                & \textbf{Irrelevant} \\
        Appropriateness         & Fairness  \\
        Performance             & Interpretability \\
        Robustness              & Reusability \\
        Performance efficiency  & \\
    \end{tabular}
    \caption{Condensed Qualities for model entity\label{tb:condensedQualities}}
\end{table}

% Appropriateness
The appropriateness quality refers to the ability to perform the type of task that is required by
the use case~\citep{siebert_construction_2021,nakamichi_requirements-driven_2020}.
For this thesis this applies to scene text \ac{OCR} models.
Additionally, the properties which are derived from the use case (see Table~\ref{tb:useCaseQualities}),
can be grouped under this quality.

% Performance
`An ML model is performant if it operates as expected according to a measure (or set of measures)
that captures relevant characteristics of the model output'~\citep{ashmore_assuring_2021}.
For the performance quality, a measure is chosen depending on the type of task to be
solved~\citep{siebert_construction_2021}.
The F-Score is an example for a metric that is used to compare different
models~\cite{chen_text_2021, long_scene_2021}.
Performance is usually measured with a test dataset that is independent from training and validating
a model in order to approximate the generalization performance~\cite{goodfellow_deep_2016,
nakamichi_requirements-driven_2020}.

% Robustness
The robustness of a model concerns environmental uncertainty~\cite{ashmore_assuring_2021}.
Due to the uncontrolled environment in the practical aspect of taking the images on-site
beneficial image properties can not be guaranteed~\citep{chen_text_2021}.
Robust text extraction can be influenced by factors such as complex backgrounds, text form
(text rotation, font variability, arrangement), image noise (lighting conditions, blur,
interference and low resolution) and access (perspective, shape of
text)~\citep{oyedotun_deep_2015,ghosh_visual_2017,chen_text_2021}.
Therefore, these properties have to be accounted for when determining the viability for an approach.
Some of these factors do not change the expected prediction (noise), others do (text
form)\cite{hu_towards_2020}.
An example for bad image quality in regards to \ac{OCR} can be seen in figure~\ref{fig:bad-example}.
% FIXME: add \cite{long_scene_2021} difficulties

% Performance efficiency
Performance efficiency addresses time and resource utilization when the model is in use.
This does not involve the training phase but the execution or
prediction~\citep{siebert_construction_2021}.
The efficiency refers to low latency needs and to minimizing resource needs such as memory
usage or power consumption~\citep{nakamichi_requirements-driven_2020, siebert_construction_2021,
sourvanos_challenges_2018}.
This quality is especially important for usage on mobile devices in conjunction with
\ac{DNN}~\citep{sourvanos_challenges_2018, niu_26ms_2019}.
Note that performance efficiency is heaviliy influenced by the
infrastrucure~\citep{nakamichi_requirements-driven_2020, siebert_construction_2021}.
Because the efficiency needs fall mostly on the model, it is categorized as such and thus deemed
relevant in the scope of this thesis.

% Fairness
The first quality often found in research that is not relevant for the use case is fairness.
A fair model is free from discrimination bias.
For \ac{ML} this is can be a big problem, since discrimination can not only be influenced through
explicit programming in terms of the model but also through implicit knowledge from the
data~\citep{vogelsang_requirements_2019}.
For the use case however no relevance is attached.
The model can either recognize the text or it fails the task.

% Interpretability
The interpretability of a model helps to justify the output~\citep{ashmore_assuring_2021}.
The interpretability is twofold: explain what the model has learned, explain how a model given the
input comes to the output~\citep{vogelsang_requirements_2019}.
This can be challenging for two reasons.
\ac{ML} models used can be complex in terms of size and structure~\citep{ashmore_assuring_2021}.
Modular processing pipelines are continuously replaced with end-to-end
models which facilitates the tradeoff between interpretability and
performance~\cite{arpteg_software_2018}.

% Reusability
Another quality for a \ac{ML} model refers to how well a model intended for one task can be reused
for another related task.
% XXX: check whether trasnfer learning defined before
This can be beneficial because transfer learning can speed up the training, thus reducing training
cost~\citep{ashmore_assuring_2021}.
Reusability is not relavant in the scope of this work as it targets the training phase of the
\ac{ML} lifecycle.
